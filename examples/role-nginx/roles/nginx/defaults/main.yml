---
# Nginx Role - Default Variables
# متغیرهای پیش‌فرض که قابل override هستند

# Package
nginx_package_name: nginx
nginx_package_state: present

# Service
nginx_service_name: nginx
nginx_service_state: started
nginx_service_enabled: yes

# Paths
nginx_conf_dir: /etc/nginx
nginx_sites_available: "{{ nginx_conf_dir }}/sites-available"
nginx_sites_enabled: "{{ nginx_conf_dir }}/sites-enabled"
nginx_snippets_dir: "{{ nginx_conf_dir }}/snippets"
nginx_log_dir: /var/log/nginx

# Main config
nginx_user: www-data
nginx_worker_processes: auto
nginx_worker_connections: 1024
nginx_multi_accept: "on"
nginx_pid: /run/nginx.pid

# HTTP settings
nginx_sendfile: "on"
nginx_tcp_nopush: "on"
nginx_tcp_nodelay: "on"
nginx_keepalive_timeout: 65
nginx_types_hash_max_size: 2048
nginx_server_tokens: "off"
nginx_client_max_body_size: 64m

# Gzip
nginx_gzip: "on"
nginx_gzip_vary: "on"
nginx_gzip_proxied: any
nginx_gzip_comp_level: 6
nginx_gzip_min_length: 256
nginx_gzip_types:
  - text/plain
  - text/css
  - text/xml
  - application/json
  - application/javascript
  - application/xml
  - application/rss+xml
  - image/svg+xml

# SSL settings
nginx_ssl_protocols: "TLSv1.2 TLSv1.3"
nginx_ssl_ciphers: "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384"
nginx_ssl_prefer_server_ciphers: "on"
nginx_ssl_session_cache: "shared:SSL:10m"
nginx_ssl_session_timeout: 1d
nginx_ssl_stapling: "on"
nginx_ssl_stapling_verify: "on"

# Security headers
nginx_add_headers:
  - "X-Frame-Options SAMEORIGIN"
  - "X-Content-Type-Options nosniff"
  - "X-XSS-Protection \"1; mode=block\""
  - "Referrer-Policy \"strict-origin-when-cross-origin\""

# Sites to configure (override in inventory)
nginx_sites: []

# Remove default site
nginx_remove_default: yes

# DH params
nginx_dhparam_size: 2048
nginx_dhparam_path: "{{ nginx_conf_dir }}/dhparam.pem"
nginx_generate_dhparam: no
